# Davel
(**DAV**orl makes bev**EL** :-) )

A simple bevel library for [OpenSCAD](https://openscad.org/).

## Introduction

Bevels and buttresses are used to soften sharp corners. Bevels are supposed to be *subtracted* from your object, buttresses are *added* to it.

Bevels and buttresses generated by this library are just slices of cylinders, so they should be quite fast to render.

## Usage

To use this library, copy `davel.scad` to your `libraries` OpenSCAD folder. You can use the menu `File` / `Show library folder...` to open it.

Then include the library at the beginning of your code with:

    use <davel.scad>

## Common parameters

To draw a bevel or a buttress you need to know:

- **where** you want it to appear;
- **how long** you want it to be;
- **the normals** of the two surfaces you want to blend together;
- **the radius** of the generated curve;
- (optional) **how much offset to add** to the sides and back of the bevel or buttress, to better merge it to the rest of the object and avoid artifacts in the preview window (optional);
- (optional) **how many subdivisions** you want the bevel or buttress to have.

![points and measures](images/measures.png)

In the above image:

- The <span style="color:blue">blue line</span> is the edge between the two surfaces.
- The <span style="color:green">green dots</span> are the ends of the edge (used in the *points* version of the bevel or buttress, see below).
- The <span style="color:red">red dot</span> is the midpoint of the edge, where the local origin is.
- The <span style="color:orange">orange</span> and <span style="color:lightblue">light blue</span> vectors are the normals of the two surfaces you want to smooth with a bevel.

## Bevels

???????
![Bevel](images/bevel.png)

Depending on how you want to specify position and length there are three slightly different versions of the bevel module:

### Bevel, basic version

    module davel_bevel(length, n1, n2, r, side_offset=0.01, back_offset = 0.01)

- `length`: length of the bevel, longitudinally.
- `n1`: normal vector of the first surface.
- `n2`: normal vector of the second surface.
- `r`: radius of the bevel.
- `side_offset`: extra length added to the sides (optional, default 0.01).
- `back offset`: extra thickness added to the back of the bevel (optional, default 0.01).

There is no position in this basic version; the origin point is set on the middle point of the edge to be smoothed; you have to `translate()` it manually.

### Bevel, "position" version

    module davel_bevel_pos(pos, length, n1, n2, r, side_offset=0.01, back_offset = 0.01)

- `pos`: 3-dimension vector position.
- `length`: length of the bevel, longitudinally.
- `n1`: normal vector of the first surface.
- `n2`: normal vector of the second surface.
- `r`: radius of the bevel.
- `side_offset`: extra length added to the sides (optional, default 0.01).
- `back offset`: extra thickness added to the back of the bevel (optional, default 0.01).

This just a convenience wrapper: it adds a new first parameter `pos` which is used to `translate()` the bevel (it refers to the midpoint of the edge).

### Bevel, "points" version

    module davel_bevel_points(p1, p2, n1, n2, r, side_offset=0.01, back_offset = 0.01)

- `p1`: 3-dimension vector of the first end.
- `p2`: 3-dimension vector of the second end.
- `n1`: normal vector of the first surface.
- `n2`: normal vector of the second surface.
- `r`: radius of the bevel.
- `side_offset`: extra length added to the sides (optional, default 0.01).
- `back offset`: extra thickness added to the back of the bevel (optional, default 0.01).

Instead of passing the position of the midpoint and the length, with this variation you can pass the coordinates of the two ends of the edge to be smoothed.

## Buttresses

![Buttress](images/buttress.png)

Buttresses are identical to bevels (and, in fact, they share che same code) except for one thing: since a buttress is *added* to the object (not subtracted), the default `side_offset` value is 0; it would otherwise produce a discontinuity in the object surface.

The same three variations are present:

### Buttress, basic version

    module davel_buttress(length, n1, n2, r, side_offset=0, back_offset = 0.01)

- `length`: length of the bevel, longitudinally.
- `n1`: normal vector of the first surface.
- `n2`: normal vector of the second surface.
- `r`: radius of the bevel.
- `side_offset`: extra length added to the sides (optional, default 0).
- `back offset`: extra thickness added to the back of the buttress (optional, default 0.01).

### Buttress, "position" version

    module davel_buttress_pos(pos, length, n1, n2, r, side_offset=0, back_offset=0.01)

- `pos`: 3-dimension vector position.
- `length`: length of the bevel, longitudinally.
- `n1`: normal vector of the first surface.
- `n2`: normal vector of the second surface.
- `r`: radius of the bevel.
- `side_offset`: extra length added to the sides (optional, default 0).
- `back offset`: extra thickness added to the back of the buttress (optional, default 0.01).

### Buttress, "points" version

    module davel_buttress_points(p1, p2, n1, n2, r, side_offset=0, back_offset=0.01)

- `p1`: 3-dimension vector of the first end.
- `p2`: 3-dimension vector of the second end.
- `n1`: normal vector of the first surface.
- `n2`: normal vector of the second surface.
- `r`: radius of the buttress.
- `side_offset`: extra length added to the sides (optional, default 0).
- `back offset`: extra thickness added to the back of the buttress (optional, default 0.01).

## Boxes

As a convenience, modules for beveled and "buttressed" boxes are provided.

![Beveled box](images/box.png)

??? TBD